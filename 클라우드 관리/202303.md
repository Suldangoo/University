## ■ 1주차 (3월 8일)

- 중간 30, 기말 30, 퀴즈참여 및 수업태도 20, 출석 20
- AWS(Amazon Web Services)로 클라우드 관리 및 실습
- AWS 계정은 유료 시스템이라 학교에서 100$가 충전된 계정을 배포할 것임
    - 이 경우 100$를 모두 소진했을 경우 교수님께 요청드리면 새로운 계정을 발급해줌
- 모든 IT서비스들은 웹 환경을 기반으로 서비스를 제공하며, IT인프라가 필요함
- IT인프라는 쉽게 말해 컴퓨터가 필요하며, 데이터 센터를 별도로 필요로 함.
- 단 그럴 경우 24시간동안 컴퓨터가 돌아가야 하는데, 이를 위해 전문적으로 만들어진 컴퓨터를 ‘서버’라고 표현함
- 그와 동시에 원격으로 접속할 수 있는 인터넷이 필요하며, 즉 네트워크를 필요로 함
- 그리고 데이터들을 모두 저장해둘 수 있는 데이터베이스가 필요함
- IT인프라를 운영하는 데엔 데이터 센터가 필요함
    - 데이터 센터는 IT인프라를 호스팅(Hosting)하는데 필요한 공간, 전력, 항온항습 등 제공
    - 인터넷을 통해 접근 가능하며, 24시간동안 운영할 환경을 제공
    - 에어컨도 계속 돌아가고, 정전을 대비해 발전기도 있는 등 환경은 다양함
- 예전엔 기업이 IT서비스를 사용자들에게 제공할 때 서버를 직접 구현하거나 사서 거기에 설치
- 그러나 클라우드 서비스는 데이터 구축, 서버 구축 그런거 다 필요 없이 클라우드 기업에 요청을 하면 내가 원하는 만큼의 볼륨의 서버를 대여해줌. 즉 IT인프라, 데이터 센터 비싸게 쓸 필요 없음
    - IaaS(인프라로서 서비스)
    - PaaS(IaaS 위에 사용자가 원하는 서비스를 개발할 수 있는 환경 제공)
    - SaaS(클라우드 기반의 응용프로그램을 서비스 형태로 제공, 일반 사용자가 가장 많이 접함)

- 2주 ~ 3주차 : 클라우드 컴퓨팅 기초
    - 클라우드 컴퓨팅의 개념, 플랫폼 모델 차이점, AWS 소개 및 사용방법
- 5주 ~ 12주차 : 클라우드에 서비스 운영 환경 구성
    - 컴퓨팅, 스토리지, 네트워크 서비스, DB, 고급 네트워킹 서비스
- 12주 ~ 14주차 : Serverless를 이용한 REST API 서버 구축
    - Lambda, API Gateway

## ■ 2주차 (3월 15일)

- 클라우드, IT서비스를 사용하려면 왜 썼는지, 어디에 썼는지 잘 알아야 하기 때문에 의의를 공부해야함

## 클라우드 개념 개요

- **IT서비스**란 컴퓨터 기술을 이용해 기업 혹은 개인에게 제공하는 서비스
    - 대부분 웹이나 앱을 통해 제공
- 내가 고객에게 제공하기 위한 웹 어플리케이션을 제작했다면, 이 프로그램을 운영하기 위한 컴퓨터가 필요하고, 그 컴퓨터는 **서버**라고 불리운다.
- 고객들이 서버에 접속하여 웹 어플리케이션을 사용하기 위해선 장비(클라이언트)로서 스마트폰, 컴퓨터 등이 필요하다. 이건 대부분 모두에게 상용화되어있다.
- 클라이언트에서 서버를 찾아가기 위해선 둘 사이를 연결할 **네트워크**가 필요하다.
    - 네트워크 : 컴퓨터 장치 사이에 서로 데이터를 주고받는 통신. 연결은 반드시 오직 네트워크
- 무선이던 유선이던, 국내던 국제던 전세계적으로 이미 연결되어있는 네트워크 설비를 **인터넷**이라고 한다. 이는 전세계의 작은 네트워크들이 모여 하나의 큰 네트워크를 구성한 것이기도 하다.
    - 국제 네트워크 통신망 인터넷은 실제로 해저 케이블을 매설하여 물리적인 연결을 모두 함
    - 위성 신호를 통해서 전세계적 통신도 가능함 (테슬라의 스타링크)
- 한 네트워크가 여러 클라이언트들을 연결한 뭉치를, 또 그 뭉치들끼리 연결된 네트워크가 존재

- 상용 IT서버는 24시간, 7일 내내 안정적인 서비스를 제공해야 한다. 원할 때만 서버가 동작했다간 유저들이 대거 이탈할 것이 분명하다.
- 오랜 시간 안정적으로 동작하기 위해선,
    1. 소프트웨어가 시스템 중단을 하지 말아야함. 즉, 버그 없는 소프트웨어가 필요. 하지만 버그가 없다는건 현실적으로 말이 안된다. 소프트웨어공학적 접근으로 버그를 줄이고, 실패하지 않도록 아키텍처를 구상해야함. 이를 위해 ‘유닛 테스트’ 등을 실행하는 디버깅 과정도 깊어짐
    2. 비정상 종료되지 않는 인프라. SW나 HW가 전혀 알 수 없는 이유로 종료되는 경우도 있으므로, 그런 곳에서 안정성이 높은 장비를 사용해야 한다. 또한 안정적인 전원 공급(정전 및 발전기), 온도 및 습도 관리(서버 사용량에 비례하는 온도 상승, 고온도일 시 비정상 종료 가능하며 습도 역시 낮은 습도를 유지해야 함)도 필요하다.
- 이러한 현실적인 문제들 때문에, 따로 방 구석에 서버를 둘 순 없고 **데이터 센터**를 따로 구축헤야 함
- 데이터 센터는 위 문제들을 완화시켜주는 별도의 시설. 즉, 인프라를 안정적으로 관리하기 위한 시설
    - 데이터 센터엔 정전이 발생해도 자체 전력설비(발전기)로 일정 시간 전원 공급이 가능 : **UPS**
    - 기존엔 타워형 서버를 쓰다가, 작은 장소에 더 많이 때려넣기 위해 **랙마운트형 서버**를 여러개 구매하여 서버 랙에 컴퓨터를 여러개 꼽아둠. 이 경우 밀집도가 더 높아 같은 공간에 더 많은 서버를 설치할 수 있다. 그러나 더 많은 열 발생과 높은 전기 사용량이 생기므로 온습도 및 전력 공급 및 관리가 필요해진다.
    - 공조기(대류현상을 활용한 냉각기)로 최대한 냉각 유지
- 오랜 시간 안정적으로 동작하기 위해선 데이터 센터에 아주아주 깔끔하게 선을 정리하여 네트워크를 물리적으로 연결해야 한다. 데이터 센터 내에 위치한 서버들을 서로 연결하기도 하고, 데이터 센터와 외부를 연결하기도 한다. 인터넷 데이터 센터는 **IDC**라고 하기도 함

- **데이터 센터의 구조**
    - 파워 실에선 한국전력으로 받아온 전기를 적절한 전압으로 바꾸어 각 장비에 공급
    - 정전 시에도 전원 공급을 하기 위해 UPS를 마련
    - 서버실로 가게 되면 수많은 랙에 랙 마운트형 서버가 엄청나게 많이 꽂혀있음
    - 서버 랙 상단에 있는 수많은 네트워크 선들이 모두 연결되어있으며, 이들이 모두 인터넷에 연결되어있음
    - 네트워크 장비만을 모아둔 서버실도 따로 존재함

- 전통적인 IT 서비스를 구축하려면 그 과정이 매우 어렵고 비싸고 복잡함
    - 서버 등의 장비 구매 과정만 수개월 걸림
    - 대기업의 경우 데이터 센터들을 아예 직접 구축까지 해야함
    - 장비를 구매하는 데에 매우 큰 비용이 발생함 (필요한 만큼 인프라 구축에 성공하면 비용 최적화)
    - 그러나 필요한 만큼 규모 예측에 실패할 경우 서비스 장애 발생, 즉각적인 장비 구매 어려움
    - 그러므로 스타트업 기업들은 갖고있는 아이디어로 재빠르게 운영을 시작해야하는데 이런 데에서 민첩성도 떨어지고, 시작 자본도 없음
- 그러나 클라우드 컴퓨팅 서비스에서 서버 장비 대여를 요청하면 모든 구축 과정이 스킵됨
- 아마존에서 가지고 있는 데이터 센터의 서버들을 사용자가 대여하여 인프라를 구축하는 것 : **AWS**
- 클라우드 환경으로 IT 서비스 구축 시 장점
    - 낮은 초기 비용과 구매 기간 단축
        - 클라우드 서비스 제공자로부터 필요한 서버나 장비를 **가상화** 형태로 대여
        - 원하는 떄에 원하는 만큼 장비 대여 가능하고 (On-Demand, VOD의 OD도 이것임)
        - 사용한 만큼 비용을 지불 (종량제 결제 모델)
    - 사용자 규모 예측 불필요
        - 사용자 규모가 증가하는 경우 즉시 필요한 만큼 자원 추가로 대여 (확장성)
        - 사용자 규모가 줄어드는 경우 즉시 반납 가능 (탄력성, 비용 최적화 가능)
- 서버 가상화 : 사용자가 서버를 대여할 때 하나의 물리서버를 통째로 쓰는 것이 아니라 CPU코어를 쪼개서 여러명이 각각 원하는 서비스만을 실행할 수 있도록 가상머신 여러개를 서버에 구축해두는 것. 사용자는 물리 버서를 사용하는 것과 차이가 없고, 여러명을 동시에 효율적으로 쓰게 할 수 있음. 가상머신을 여러개 다운받아놓고 자원을 배분할 수 있다는 것
- 서버 컴퓨터의 경우 일반적인 OS가 아닌 **하이퍼바이저**를 설치하여 사용하고, 이 하이퍼바이저는 여러 가상머신을 구축하고 관리할 수 있는 핵심 시스템
- 클라우드 환경의 확장성
    - 서버 및 장비를 원하는 때에 원하는 만큼 사용 가능 → On-Demand
    - 필요한 경우 추가 대여하는 것이 가능 → 확장성
    - 전통적인 방식은 사용자가 늘어나면 서버 과부화, 사용자 적으면 서버 낭비이지만 클라우드는 그런 점을 완벽하게 커버 가능
    - 사용자가 다시 줄어들면 대여한 자원을 반납 → 탄력성, 비용 최적화
    - + IP는 언제 바뀔지, 추가될지 삭제될지 모르므로 클라이언트의 접근을 원하는 IP서버에 뿌려주는 중간 매개체를 ‘노드 밸런서’라고 하는데 추후 공부할 예정
- 덕분에 많은 스타트업들이 실패할까봐 걱정하지 않고 많이 시작할 수 있게 됨

- 클라우드 서비스 제공자(Cloud Service Provider, CSP)의 경우엔
    - 글로벌 : AWS(Amazon Web Services, 점유율 세계 1위, 최초의 상용 클라우드 서비스), Microsoft Azure, GCP(Google CLude Platform) 등이 존재
    - 국내 : Naver Cloud, KT Cloud, NHN Cloud
    
- AWS Academy를 통해 우리가 클라우드 실습을 할 것.
    - Start Lab을 눌러 가상환경을 시작할 수 있음. 이 상태에서 대여 등 과금 시스템을 사용할 때부터 비용이 청구됨
    - 초록색으로 불빛이 들어온 AWS 글씨를 클릭 시 서비스를 본격적으로 시작하게 됨
    - 가상환경 접속 후 종료 시 반드시 로그아웃을 하는 것이 좋음
    - 가상환경 로그아웃 후 End Lab을 눌러 가상환경을 종료할 수 있음
- AWS Academy 사용 주의사항
    - 예산 잔액은 매 8시간에서 12시간 사이로 업데이트
    - End Lab으로 가상환경을 종료해도 기존에 생성한 리소스는 그대로 유지
        - EC2 인스턴스같은 경우에는 중지될 수 있으나, 생성된 상태로 유지
    - Reset으로 가상환경 초기화 가능.
        - 초기화 시 작업 내용들이 모두 사라지고, 완전히 새로운 환경으로 변경
        - 단, 예산 잔액은 그대로이므로 비용은 계속 유의해야 함
    - 실제로 클라우드를 대여하여 실습할 땐 리눅스 커맨드를 사용함

- EC2서비스에 들어간 후 상단 검색창에 원하는 기능을 검색하면 원하는 서비스에 이동 가능
- EC2(Elastic Cloud Compute)는 탄력성이 있는 연산 가상머신
    - 가상머신에서 대여한 장비(컴퓨터) 하나하나를 인스턴스라고 호칭함.
- 인스턴스 시작 시 인스턴스를 만드는 화면으로 접속
    - 인스턴스 이름 입력 후, 해당 인스턴스 장비가 사용할 가상머신 OS를 선택할 수 있음
    - 아마존 리눅스, 맥OS, 우분투, 레드햇, 윈도우 등이 존재함. 우선은 아마존 리눅스
    - 아키텍처는 64비트(x86). x86은 인텔에서 제작한 CPU 규격
    - 인스턴스 유형은 서버의 스펙, 메모리 등을 결정하는 부분. 좋은 스펙일 경우 시간당 비용이 비싸짐
        - 우리 수업에선 t2.micro 인스턴스 유형을 사용할 예정
    - 키 페어(로그인)은 인스턴스에 연결할 인증 방식을 고르는 것. vockey라는 이름을 쓸 것
    - 네트워크 설정에서 방화벽은 SSH프로토콜에선 아무나 접속할 수 있게끔 설정
    - 스토리지 구성은 용량 할당. 용량을 늘릴 수록 당연히 비싸진다. 우선은 8GB로 세팅
    - 고급 세부 정보는 우선 스킵
- 인스턴스 생성이 되었다면 해당 가상 머신을 빌리게 된것. 인스턴스 목록에서 인스턴스 ID 를 확인할 수 있으며, 인스턴스 상태가 실행중이면 장비가 돌아가고 있는 것. 서버가 돌아가고 있다는 뜻이다
- 이후 Learner Lab에 들어가보면 리눅스 커맨드를 입력할 수 있는 CUI창이 존재

- 우리는 러너랩 가상머신 터미널 환경에서, 아까 만들었던 EC2 인스턴스로 접속을 할 것임
- 그렇기에 EC2 인스턴스에 SSH 액세스를 하는 방식으로 리눅스 방식을 사용할 것
- ssh -i 키페어주소(~/.ssh/labsuser.pem) 이후 ec2-user@ 후 인스턴스의 ipv4 주소 넣으면 됨
- yes누르면 EC2 인스턴스 접속이 완료됨. 이후에 해당 상태에서 실습을 진행할 예정

- 직후엔 인스턴스 종료를 눌러 서버를 반납. 안에 있던 모든 데이터 및 스토리지도 유실됨
- 이후에 러너랩 가서 연결이 해제되었다는 로그를 확인 후 End Lab을 눌러 랩 가상환경 종료

## ■ 3주차 (3월 22일)

- DevOps는 개발자가 운영도 동시에 하라는 의미로 만들어진 툴
- 굳이 직관적인 GUI 냅두고 CUI를 쓰는 이유는, 똑같은 작업을 할 때 GUI는 마우스로 일일히 눌러가며 반복해야 하지만 CUI에서 코딩을 해둔다면 일련의 작업을 한 번에 할 수도 있고, 자동화를 시킬 수도 있다.

- AWS 잔액은 실시간 반영이 아닌 8~12시간마다 업데이트
- EC2 (Elastic Cloud Compute) : 탄력성 있는 클라우드 컴퓨팅 서비스
    - 동적으로 규모를 조절할 수 있는 클라우드 컴퓨팅 서비스
- 기존 서버에서 실행하는 것과 동일한 유형의 애플리케이션을 호스팅할 수 있는 가상 머신
- 사용자가 할당받은 가상 머신 한 대를 인스턴스(Instance)라고 함
- OS를 고를 때 OS와 함께 설치될 애플리케이션을 같이 지정해 설치할 수 있음

- 인스턴스를 만들어 인터넷을 통해 연결하면 IP가 다른 곳에서도 접속이 가능하다
- 원격 서버 접속(Remote Server Access) 방법이 여러가지 있는데, SSH방식을 사용하면 네트워크 계층에서 사용자가 보낸 ID, PW가 이미 암호화된다.
    - 네트워크 계층은 누구나 공유기를 통해서 열어볼 수 있는데, 그 전에 미리 암호화를 하여 보내고 받는 곳에서 복호화를 통해 다시 받는 것이 SSH 의 역할인 것
- http와 https 두 개가 존재하는데, 이 중 https가 SSH처럼 암호화를 지원하는 프로토콜
- 그러나 SSH 클라이언트와 SSH 서버 사이의 인증을 할 때 매번 ID, PW를 통해 인증할 수는 없으니까, 간단하고 강력한 인증 방식인 ‘키 페어’ 방식을 사용함
    - 키 페어 방식은 두 개의 쌍을 이루는 키가 존재하며, 사용자 로컬 PC에 Private Key, 원격 서버에 public Key가 존재하고 두 키간의 인증이 맞게 되면 인증이 성공하는 방식
    - AWS의 경우엔 인스턴스를 구축하면 알아서 Public Key가 하나 생성됨

- EC2 서비스를 실행하는 방식은 다음과 같다
    - 로컬 PC에서 실습 환경용 AWS 데이터 센터 내의 AWS Academy 서버에 접속하여 터미널 창을 띄우는데, 우리가 EC2 인스턴스를 만들고 접속하면 EC2 서비스용 물리 서버에 SSH 방식으로 연결하게 되는 방식이다.
- Linux 터미널 환경에서 프로그램을 실행하기 위해선, **프로그램 경로/프로그램명 옵션** 순으로 명령어를 실행할 수 있다
    - 그러나 매우 기본적인 명령어들은 어디서든 쓸 수 있도록 자동으로 경로가 등록되어있어 ifconfig처럼 바로 실행할 수 있으나, 우리가 만든 프로그램은 경로를 입력하거나 경로를 별도로 등록해주어야 한다.

- SSH로 원격 서버 접속을 하는 명령어

```livescript
ssh -i 키페어파일경로 사용자명@서버ip
```

- 리눅스에 설치되어있는 SSH 클라이언트 프로그램 실행
- -i 옵션으로 인자를 주기로 함
- AWS에 접속하기 위한 private key가 있는 경로를 입력
- 내가 원하는 ec2 사용자 지정
- 어디에 접속할 것인지 IPv4 경로를 지정

```livescript
ssh -i ~/.ssh/labsuser.pem ec2-user@ipv4 주소
```

- 컴퓨터에 데이터를 저장하기 위해선 애플리케이션에서 실행된 메모리에 저장된 데이터를 디스크에 저장해야 하는데, 파일io를 직접 하기엔 너무 원초적이고 비직관적이므로 DB를 사용해 그 권한을 위임
- 디스크는 그 하나로 통째로 있는 것이 아니라, 운영체제가 논리적 볼륨을 지정해준다
    - C드라이브, D드라이브가 그런 개념임. 논리적 볼륨으로 파티션을 나눔
- 그리하여 나뉘어진 C드라이브가 가장 최상위 디렉토리가 되고, 그 아래 하위 디렉토리들을 계속해서 만드는 계층 구조가 이루어짐. (하이어라키)
    - 그렇게 만들어진 경로가 C:\Users\abc.txt
    - 계층을 왔다갔다 하며 경로를 탐색하고 그 파일을 찾는 것
- 디렉토리 간의 이동을 GUI로 표시한 것이 우리가 마우스로 파일 돌아다니는 것
- 그러나 위의 설명은 윈도우 운영체제에서의 파일 아키텍처임. 리눅스에서의 파일 아키텍처는 다르다
- 윈도우의 C, D…와 다르게 리눅스는 최상위 디렉토리가 딱 하나의 볼륨에만 할당되어있고, 나머지 볼륨들은(sda, sdb, sdc…) 그 최상위 디렉토리의 하위 디렉토리로서 들어가있음

- EC2 인스턴스를 만들어 접속하게 되면, 루트\home\ec2-user에 접속하게 됨
- 그 하위에 디렉토리를 만들어가는 형태이다
    - pwd로 현재 경로 확인
    - mkdir로 디렉토리 생성
    - cd로 디렉토리간 이동
        - cd 경로를 입력하면 해당 경로로 이동, cd ..를 입력하면 상위 경로로 이동
        - 여기서 입력하는 경로엔 상대경로와 절대경로가 존재함
        - 절대경로 : \home\ec2-user\test
        - 상대경로 : 현재 내 위치가 ec2-user인 상태에서 .\test 혹은 test
        - ~ : 사용자 디렉토리를 가리키는 기호로서, 로그인한 사용자 디렉토리 함축
    - ls로 현재 디렉토리에 있는 파일, 디렉토리 목록 확인
        - ls -la 옵션 사용 시 숨김 파일도 모두 나오게 됨
        - 이 때 러너랩 환경에서만, 우리가 쓰기 편하도록 private key를 .ssh 디렉토리에 저장해둔게 있다.
    - rm 명령어로 파일을 삭제할 수 있음
        - 그러나 옵션이 없으면 파일만 삭제할 수 있어서, rm -r로 디렉토리를 삭제해야 함
    - exit 명령어로 ec2 인스턴스와의 ssh 접속을 끊고 다시 learner lab 터미널로 돌아오게 됨
    
- 리눅스에 명령어로 프로그램 입력할 때 탭 누르면 자동완성 됨
- 바이너리 파일과 텍스트 파일의 차이
    - 텍스트 파일은 문자열로 인코딩이 되어있는 파일
        - UTF-8, ANSI, EUC-KR 인코딩 방식들이 다 문자열 형태의 인코딩
        - 이런 형태의 파일은 cat으로 출력할 수 있음
    - 그 외에 모든 파일은 다 .bin 바이너리 파일
        - 우리가 만든 프로그램(코드)을 컴파일하면 바이너리 파일로 번역이 되는데, 그런 파일들이 다 .bin파일
        - 예를 들어, JAVA는 JVM이라는 가상 머신 위에서 돌아가며 JVM은 자바로 작성한 코드를 컴파일한 bin 파일을 해석할 수 있지만, 그 외에 것들로 읽으려고 하면 이상한 값이 나옴
    - 한글 파일 (hwp) 같은 파일은 문자열처럼 보이지만, 그 안에 표나 속성 등을 서술하기 위해선 문자열만으로 인코딩이 되지 않으므로 bin 파일로 만들어질 수밖에 없음

- 윈도우 Local PC에서 SSH로 직접 인스턴스에 접속하기 위해선, 가장 유명한 프로그램 중 하나인 PuTTY 프로그램을 사용해 접속할 수 있음
    - Learner Lab의 AWS Details를 눌러 Download PPK로 키페어 파일을 다운받을 수 있으며, 이 파일을 갖고있으면 누구나 접속이 가능하므로 유출하지 않고 소중히 보관해야함
- PuTTY에 EC2 인스턴스의 IPv4 주소를 넣고, 포트는 22, SSH 방식 선택
- Connection 설정에서 Seconds between Keepalives(킵얼라이브간 시간차) 30초 설정
    - 소켓 연결상 타임아웃의 기준을 늘림
    - 활동을 안하고 있는 소켓 연결을 타임아웃으로 끊는데, 저 30초를 설정하면 빈 패킷을 일정 시간동안 주고받아 연결 시간을 늘리는 것
    - 물론 서버에서 빈 패킷을 안 받게 킵얼라이브를 못 하게 막을 수 있음
- Connection - Auth 에서 Browse에서 다운받은 ppk 키페어 파일을 선택
- 접속 후 사용자 아이디를 ec2-user을 입력하면 로그인 됨

- EC2 인스턴스의 수명 주기는 대기 - 실행 순으로 실행이 된다
    - 실행 상태에서 중지 시 중지중 - 중지됨으로 최대 절전모드에 들어감
    - 종료 시 종료중-종료됨으로 인스턴스를 끝낼 수 있음
- 중지는 서버의 전원을 내렸지만 데이터센터의 스토리지를 점유중이라 비용은 계속 내야함
- 그러나 가상머신은 좀 다른데, 가상머신은 켜진 순간 CPU를 점유하기 때문에 이쪽 비용은 내지 않음