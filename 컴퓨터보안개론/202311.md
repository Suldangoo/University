# ■ 9주차 (11월 7일)

# 암호의 이해

## 암호의 개념과 원리

- 암호문
    - 비밀 유지를 위해 당사자만 알 수 있도록 꾸민 약속 기호
    - 평문 → 암호화 → 암호문 → 복호화 → 평문

### 암호화 방식

- 전치법
    - 단순히 메시지에 들어있는 문자 위치를 바꾸는 방법
    - 스파르타의 봉 암호화
- 대체법
    - 메시지의 글자를 다른 글자로 대체하여 암호화
    - 적절한 배합을 찾으면 쉽게 복호화되는 전치법의 문제 해결
    - 단일 치환, 다중 치환으로 나뉠 수 있음
- 단일 치환 암호화
    - 알파벳 한 글자씩 다른 글자로 대체
    - 시저 암호화
        - 알파벳 스물 여섯자를 n자씩 오른쪽으로 이동해 해당되는 글자로 변환
    - 모노 알파베틱 암호화
        - 스물 여섯자를 각각 다른 알파벳에 대응시켜 알파벳 암호화
        - 복호화하려면 알파벳 대칭표가 있어야 함
        - 키워드가 주어지면 해당 키워드의 문자 순서대로 중복 없이 A부터 매칭하고, 이후엔 키워드의 마지막 문자부터 시저 암호화로 이미 쓴 것은 제외하고 쭉 나열
- 다중 치환 암호화
    - 비즈네르 암호화
        - 암호화하려는 평문의 알파벳을 비즈네르 표의 가로축에서 찾음
        - 암호화 키의 첫 문자 알파벳을 비즈네르 표의 세로축에서 찾음
        - 두 축이 겹쳐지는 대칭되는 알파벳으로 암호화
        - 복호화 과정
            - 암호화 키의 첫 문자를 세로축에서 찾음
            - 해당 세로축의 암호문 알파벳을 찾음
            - 그 알파벳의 가로축 알파벳이 평문 알파벳
    - 플레이페어 암호화
        - 초기에는 어렵다는 이유로 사용되지 않았다가, 제 1차 세계대전, 2차 세계대전에 사용
        - 2개로 이루어진 문자 쌍을 다른 문자 쌍으로 대체하는 암호화 방법
        - 5행 5열의 2차원 테이블인 플레이페어 암호화 테이블이 존재
            - 이때 많이 안 쓰는 Z는 그냥 Q칸에 하나로 통합
        - 2개로 이루어진 알파벳 쌍의 문자를 대조하여 치환
            1. 두 문자가 서로 다른 행과 열에 존재하는 경우
                1. 서로가 겹치는 행열을 찾고, 평문과 같은 행에 있는 문자로 치환 (행 우선 방식)
                2. 열 우선 방식이라면 같은 열에 있는 문자로 치환
            2. 두 문자가 같은 열에 있다면 각 한 칸씩 아래에 있는 문자열로 치환
                1. 이 때, 가장 밑에 있는 알파벳이라면 제일 위에로 치환
            3. 두 문자가 같은 행에 있다면, 각 한 칸씩 오른쪽에 있는 문자열로 치환
            4. 두 문자열 쌍이 같은 쌍이거나 마지막에 홀수로 남을 경우 X로 문자열 쌍을 치환

## 대칭 암호화 방식

- 암호화 할때의 키와 복호화 할때의 키가 같은 알고리즘
- DES 알고리즘
    - L1값과 R1값이 S-BOX로 이동, 암호화 키와 조합하여 암호화 후 XOR 연산으로 리턴
    - 모든 단어가 0과 1로 표현
    - S-BOX에 데이터를 넣기 전, 앞뒤 비트를 확장해서 비트를 추가
        - 1011으로 4비트였다면, 1 1011 1 로 6비트로 확장
        - 맨 앞에껀 앞 비트모음의 제일 뒷 비트, 맨 뒤에껀 뒤 비트모음의 제일 뒤 비트
        - 확장 비트 00 ~ 11을 S-Box의 세로열
        - 기존 비트 0000~1111을 S-Box의 가로열
        - 매칭되는 십진수를 2진수로 재전환하면 원래 암호가 됨
- 트리플 DES 알고리즘
    - DES 알고리즘이 복호화가 가능해져서, AES 개발 전까지 임시로 쓰던 암호화 방식
    - DES 암호화를 총 세번 해버림
        - 이 때 두 번째 암호화에선 두 번째 암호화 키를 사용하여 암호화
- AES 알고리즘
    - DES가 약해진 이후, NIST에서 암호화 알고리즘 공모로 제작
- SEED 알고리즘
    - 한국 인터넷 진흥원과 국내 암호 전문가들이 순수 국내 기술로 개발한 128비트 블록 암호화
    - 정보통신단체 표준으로 제정
- ARIA 알고리즘
    - 전자정보 구현으로 다양한 환경에 적합한 암호화 알고리즘 필요
    - 국가보안기술연구소 주도로 개발
    - 2004년 국가표준기본법에 의거하여 국가표준으로 지정
- 양자 암호
    - 1984년 찰스 베넷과 질 브라사스가 BB84라는 프로토콜을 통해 제안
    - BB84 : 양자 채널로 송신자와 수신자가 암호화 키를 공유하게 하는 프로토콜.
        - 베넷, 브라사스의 이름과 84년 연도로 작명
- 기타 대칭형 알고리즘
    - IDEA, RC5, Skipjack, LEA

## 비대칭 암호화 방식

- 암호화 할 때의 키와 복호화 할 때의 키가 다른 암호화 알고리즘
- 공개된 수에 두 사용자 각각의 수를 제곱하여 나온 값을 서로 공유
- 상대방에가 받은 수에 자신의 수를 제곱하면 같은 키가 나옴
    - 공개된 수 : 3
    - 철수의 수 : 5 / 영희의 수 : 7
    - 3^5 = 243 / 3^7 = 2817
    - 2817 ^ 5 = 50031… / 243 ^ 7 = 50031…
    - (3^7)^5 = 50031… / (3^5)^7 = 50031…
    - → 3^35로 서로 동일하여 자신의 수를 가지고 같은 값을 공유
- RSA 알고리즘
    - 비대칭 알고리즘에서 오늘날 산업 표준으로 사용
    - MIT의 리베스트, 샤미르, 애들먼이 개발했으며, 각각의 앞글자를 따서 작명
    - 기본적인 정수론 (소수) 사용
    - 중요 정보를 소수 2개로 표현한 후, 두 소수의 곱을 힌트와 함께 전송하여 암호화
    - p와 q값이 소수로 이루어져있으며, 이 두 값의 곱을 모든이에게 공개된 N값으로 사용
    - 현대에선 p와 q값이 거의 스무자리 가깝게 길어 두 수를 곱하면 400자리가 넘어감
        - 이는 슈퍼컴퓨터로 해결하려고 해도 수광년이 걸림

### 비대칭 암호화의 구조

- RSA 알고리즘이 나오며 정립
- 각 개인이 공개 키와 개인 키를 소유하는 구조, 서로의 개인 키는 얻을 수 없음
- 언제나 한 쌍의 개인 키와 공개 키로 암호화와 복호화가 이루어짐
    - 개인 키로 암호화한 것은 공개 키로 복호화하여 평문화
    - 공개 키로 암호화한 것은 개인 키로 복호화하여 평문화
- **기밀성**
    - 비대칭 암호화 알고리즘은 대칭 암호화 알고리즘보다 더 엄밀한 기밀성을 제공
    - 예를들어, A가 B에게 메시지를 보낼 때, B의 공개 키를 잘 찾아 암호화하고 B에게 전송
    - B는 받은 암호화 메시지를 자신의 개인 키로 복호화하여 평문화
    - 즉, 암호화된 메시지가 중간에 다른 사람에게 가로채져도 개인 키가 없으므로 안전
- **부인 방지**
    - 대칭 암호화 알고리즘에는 없는 기능으로, ‘발뺌 방지’ 기능
    - A의 개인 키로 암호화된 메시지는 A의 공개 키로밖에 열 수 없음
    - 즉, 해당 메시지가 A의 공개 키로 풀린다면 반드시 A가 만든 메시지임을 확신 가능

## 해시

### 해시의 특징

- 하나의 문자열을 더 짧은 길이의 값이나 키로 변환
- 대표적인 해시 알고리즘은 MD5
- 어떠한 평문을 해시 알고리즘을 돌리면, 해당 평문의 길이가 길든 짧든 32개 문자로 길이가 모두 같게 나옴.
- 단어나 문자가 하나만 바뀌어도 해시 결과가 완전히 달라짐
- 해시는 일방적인 변환이므로, 해시 결과를 가지고 평문을 만들 순 없음.
    - 즉, 이것은 암호화가 아니라 평문의 위조, 변조 (**무결성**)를 확인하기 위한 수단
- 충돌 : 다른 값의 데이터를 입력했는데 해시 결과 값이 같을 수도 있는 상황이 있음

### 해시의 역할

- DB 탐색을 효과적으로 구현하기 위해 만들어진 것이었음
- 데이터가 임의로 변경되지 않았다는 무결성 확인

### 해시의 종류

- MD 알고리즘
    - 로널드 리베스트가 공개 키 기반 구조 제작을 위해 RSA와 함꼐 개발. MD2, 4, 5가 있음
- SHA
    - 160비트 값을 생성하는 해시 함수, MD4가 발전한 형태
    - MD5보다 조금 느리지만 좀 더 안전하며, SHA-1과 SHA-2로 나눌 수 있음